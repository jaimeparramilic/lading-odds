"use strict";(()=>{var e={};e.id=316,e.ids=[316],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9295:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>v,patchFetch:()=>R,requestAsyncStorage:()=>y,routeModule:()=>x,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f});var r={};o.r(r),o.d(r,{GET:()=>m,runtime:()=>d});var a=o(9303),s=o(8716),n=o(670),i=o(7070);let p=require("crypto");var u=o.n(p);let d="nodejs",{SHOPIFY_API_KEY:h,SHOPIFY_SCOPES:c,APP_URL:l}=process.env;async function m(e){let t=e.nextUrl.searchParams.get("shop");if(!t||!t.endsWith(".myshopify.com"))return new i.NextResponse("Par\xe1metro 'shop' inv\xe1lido",{status:400});if(!h||!c||!l)return new i.NextResponse("Faltan variables de entorno",{status:500});let o=u().randomBytes(24).toString("base64url"),r=`${l}/api/shopify/callback`,a=`https://${t}/admin/oauth/authorize?client_id=${encodeURIComponent(h)}&scope=${encodeURIComponent(c)}&redirect_uri=${encodeURIComponent(r)}&state=${encodeURIComponent(o)}`,s=i.NextResponse.redirect(a);return s.cookies.set("shopify_oauth_state",o,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:300}),s.cookies.set("shopify_shop",t,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:300}),s}let x=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/shopify/oauth/route",pathname:"/api/shopify/oauth",filename:"route",bundlePath:"app/api/shopify/oauth/route"},resolvedPagePath:"/Users/admin/Documents/ODDS/landing/lading-odds/app/api/shopify/oauth/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:y,staticGenerationAsyncStorage:f,serverHooks:g}=x,v="/api/shopify/oauth/route";function R(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[948,972],()=>o(9295));module.exports=r})();